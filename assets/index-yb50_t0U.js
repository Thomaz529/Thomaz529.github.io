import{B as ie,s as q,W as ae,P as ue,S as le,C as I,t as ce,u as me,v as C,a as D,O as R,w as fe,r as _}from"./three.module-BG7GZZT6.js";import{O as de}from"./OrbitControls-gwNtK9E6.js";import{_ as he,j as pe,c as ge,o as be}from"./index-DQxC938F.js";function ye(a,h=!1){const s=a[0].index!==null,y=new Set(Object.keys(a[0].attributes)),x=new Set(Object.keys(a[0].morphAttributes)),p={},m={},f=a[0].morphTargetsRelative,n=new ie;let i=0;for(let e=0;e<a.length;++e){const r=a[e];let o=0;if(s!==(r.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const t in r.attributes){if(!y.has(t))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+'. All geometries must have compatible attributes; make sure "'+t+'" attribute exists among all geometries, or in none of them.'),null;p[t]===void 0&&(p[t]=[]),p[t].push(r.attributes[t]),o++}if(o!==y.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+". Make sure all geometries have the same number of attributes."),null;if(f!==r.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const t in r.morphAttributes){if(!x.has(t))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+".  .morphAttributes must be consistent throughout all geometries."),null;m[t]===void 0&&(m[t]=[]),m[t].push(r.morphAttributes[t])}if(h){let t;if(s)t=r.index.count;else if(r.attributes.position!==void 0)t=r.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+e+". The geometry must have either an index or a position attribute"),null;n.addGroup(i,t,e),i+=t}}if(s){let e=0;const r=[];for(let o=0;o<a.length;++o){const t=a[o].index;for(let u=0;u<t.count;++u)r.push(t.getX(u)+e);e+=a[o].attributes.position.count}n.setIndex(r)}for(const e in p){const r=W(p[e]);if(!r)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" attribute."),null;n.setAttribute(e,r)}for(const e in m){const r=m[e][0].length;if(r===0)break;n.morphAttributes=n.morphAttributes||{},n.morphAttributes[e]=[];for(let o=0;o<r;++o){const t=[];for(let g=0;g<m[e].length;++g)t.push(m[e][g][o]);const u=W(t);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" morphAttribute."),null;n.morphAttributes[e].push(u)}}return n}function W(a){let h,s,y,x=-1,p=0;for(let i=0;i<a.length;++i){const e=a[i];if(h===void 0&&(h=e.array.constructor),h!==e.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(s===void 0&&(s=e.itemSize),s!==e.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(y===void 0&&(y=e.normalized),y!==e.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(x===-1&&(x=e.gpuType),x!==e.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;p+=e.count*s}const m=new h(p),f=new q(m,s,y);let n=0;for(let i=0;i<a.length;++i){const e=a[i];if(e.isInterleavedBufferAttribute){const r=n/s;for(let o=0,t=e.count;o<t;o++)for(let u=0;u<s;u++){const g=e.getComponent(o,u);f.setComponent(o+r,u,g)}}else m.set(e.array,n);n+=e.count*s}return x!==void 0&&(f.gpuType=x),f}const xe={id:"earth"},we={__name:"index",setup(a){return pe(()=>{const h=document.getElementById("earth"),s=new ae({canvas:h,antialias:!0}),y=60,x=2,p=.1,m=10,f=new ue(y,x,p,m);f.position.z=2.5;const n=new de(f,h);n.enableDamping=!0,n.enablePan=!1,n.minDistance=1.2,n.maxDistance=4,n.update();const i=new le;i.background=new I("black");{const c=new ce().load("https://threejsfundamentals.org/threejs/resources/images/world.jpg",g),b=new me(1,64,32),d=new C({map:c});i.add(new D(b,d))}async function e(l){return(await fetch(l)).text()}function r(l){const c=[],b={data:c};let d,w;return l.split(`
`).forEach(v=>{const A=v.trim().split(/\s+/);if(A.length===2)b[A[0]]=parseFloat(A[1]);else if(A.length>2){const T=A.map(G=>{const E=parseFloat(G);if(E!==b.NODATA_value)return d=Math.max(d===void 0?E:d,E),w=Math.min(w===void 0?E:w,E),E});c.push(T)}}),Object.assign(b,{min:w,max:d})}function o(l){const{min:c,max:b,data:d}=l,w=b-c,v=new R;i.add(v);const A=new R;v.add(A);const T=new R;T.position.z=1,A.add(T);const G=new R;G.position.z=.5,T.add(G);const E=new I,F=Math.PI*.5,L=Math.PI*-.135,U=[];d.forEach((X,J)=>{X.forEach((j,K)=>{if(j===void 0)return;const H=(j-c)/w,Q=1,Y=1,Z=1,B=new fe(Q,Y,Z);v.rotation.y=_.degToRad(K+l.xllcorner)+F,A.rotation.x=_.degToRad(J+l.yllcorner)+L,T.scale.set(.005,.005,_.lerp(.01,.5,H)),G.updateWorldMatrix(!0,!1),B.applyMatrix4(G.matrixWorld);const $=_.lerp(.7,.3,H),ee=1,te=_.lerp(.4,1,H);E.setHSL($,ee,te);const re=E.toArray().map(k=>k*255),ne=B.getAttribute("position").count,S=3,z=new Uint8Array(S*ne);z.forEach((k,O)=>{z[O]=re[O%3]});const oe=!0,se=new q(z,S,oe);B.setAttribute("color",se),U.push(B)})});const P=ye(U,!1),N=new C({vertexColors:!0}),V=new D(P,N);i.add(V)}e("https://threejsfundamentals.org/threejs/resources/data/gpw/gpw_v4_basic_demographic_characteristics_rev10_a000_014mt_2010_cntm_1_deg.asc").then(r).then(o).then(g);function t(l){const c=l.domElement,b=c.clientWidth,d=c.clientHeight,w=c.width!==b||c.height!==d;return w&&l.setSize(b,d,!1),w}let u=!1;function g(){if(u=void 0,t(s)){const l=s.domElement;f.aspect=l.clientWidth/l.clientHeight,f.updateProjectionMatrix()}n.update(),s.render(i,f)}g();function M(){u||(u=!0,requestAnimationFrame(g))}n.addEventListener("change",M),window.addEventListener("resize",M)}),(h,s)=>(be(),ge("canvas",xe))}},Ge=he(we,[["__scopeId","data-v-dcc26697"]]);export{Ge as default};
