import{E as Ve}from"./index-DQKEvUsp.js";import"./CesiumEarth-D0reHEmA.js";import{_ as ze,c as Fe,a as Ee,b as Re,w as Ie,F as He,r as $e,o as Ue,d as De}from"./index-DQxC938F.js";function We(r){return viewer.entities.add({polyline:{positions:r,width:2,material:Cesium.Color.fromCssColorString("#2987f0"),arcType:Cesium.ArcType.RHUMB,clampToGround:!1}})}function de(r,t){return viewer.entities.add({id:t,show:!1,polyline:{positions:r,width:1,material:new Cesium.PolylineDashMaterialProperty({color:new Cesium.Color(1,1,1,1)}),arcType:Cesium.ArcType.RHUMB,clampToGround:!1}})}function Qe(r){return viewer.entities.add({id:"polygon",polygon:{hierarchy:r,fill:!0,material:Cesium.Color.fromCssColorString("#2987f0").withAlpha(.2),outline:!0,outlineColor:Cesium.Color.fromCssColorString("#2987f0"),perPositionHeight:!0}})}function ke(r){const t=viewer.entities.values;if(t.length>0)for(let d=t.length-1;d>=0;d--)t[d].id.slice(0,r.length)===r&&viewer.entities.remove(t[d])}function me(r,t,d){var p=Cesium.Transforms.eastNorthUpToFixedFrame(t),E=Cesium.Matrix4.inverse(p,new Cesium.Matrix4);Cesium.Matrix4.multiplyByPoint(E,t,new Cesium.Cartesian3);var S=Cesium.Matrix4.multiplyByPoint(E,r,new Cesium.Cartesian3),V=S.x*Math.cos(Cesium.Math.toRadians(d))+S.y*Math.sin(Cesium.Math.toRadians(d)),i=S.y*Math.cos(Cesium.Math.toRadians(d))-S.x*Math.sin(Cesium.Math.toRadians(d)),l=S.z;return Cesium.Matrix4.multiplyByPoint(p,new Cesium.Cartesian3(V,i,l),new Cesium.Cartesian3)}function je(r,t){const d=Cesium.Cartesian3.subtract(t,r,new Cesium.Cartesian3),p=Cesium.Cartesian3.normalize(d,new Cesium.Cartesian3),E=Cesium.Cartesian3.distance(r,t)/4,S=Cesium.Cartesian3.add(Cesium.Cartesian3.multiplyByScalar(p,E,new Cesium.Cartesian3),t,new Cesium.Cartesian3),V=me(S,t,-90),i=Cesium.Cartesian3.distance(r,t)/4.3,l=Cesium.Cartesian3.add(Cesium.Cartesian3.multiplyByScalar(p,i,new Cesium.Cartesian3),t,new Cesium.Cartesian3),o=me(l,t,-90),e=Cesium.Cartesian3.distance(r,t)/4/3.5*2.5,c=Cesium.Cartesian3.add(Cesium.Cartesian3.multiplyByScalar(p,e,new Cesium.Cartesian3),t,new Cesium.Cartesian3),n=me(c,t,-90);function m(w,Z,T){const f=Cesium.Quaternion.fromAxisAngle(w,Cesium.Math.toRadians(Z)),C=Cesium.Matrix3.fromQuaternion(f),R=Cesium.Matrix4.fromRotationTranslation(C),P=Cesium.Cartesian3.subtract(t,T,new Cesium.Cartesian3),h=Cesium.Matrix4.multiplyByPoint(R,P,new Cesium.Cartesian3);return Cesium.Cartesian3.add(h,t,new Cesium.Cartesian3)}let y=[];for(let w=180;w<=360;w+=5)y.push(m(p,w,V));viewer.entities.add({id:"ruler1",polyline:{positions:y,width:1,arcType:Cesium.ArcType.NONE,material:Cesium.Color.fromCssColorString("#aeff00")}});for(let w=180;w<=360;w+=15){const Z=(w-180)/5;viewer.entities.add({id:"tick"+Z,polyline:{positions:[m(p,w,o),y[Z]],width:1,arcType:Cesium.ArcType.NONE,material:Cesium.Color.fromCssColorString("#aeff00")}})}const b=Cesium.Cartesian3.subtract(y[0],y[y.length-1],new Cesium.Cartesian3),N=Cesium.Cartesian3.cross(d,b,new Cesium.Cartesian3),a=Cesium.Cartesian3.normalize(N,new Cesium.Cartesian3),O=Cesium.Plane.fromPointNormal(t,a);let v=[];for(let w=180;w<=260;w+=5)v.push(m(p,w,n));const A=Cesium.Plane.projectPointOntoPlane(O,v[v.length-1],new Cesium.Cartesian3);v.push(A),viewer.entities.add({id:"ruler2",polyline:{positions:v,width:1,arcType:Cesium.ArcType.NONE,material:Cesium.Color.fromCssColorString("#aeff00")}});let k=[];for(let w=280;w<=360;w+=5)k.push(m(p,w,n));const X=Cesium.Plane.projectPointOntoPlane(O,k[0],new Cesium.Cartesian3);k.unshift(X),viewer.entities.add({id:"ruler3",polyline:{positions:k,width:1,arcType:Cesium.ArcType.NONE,material:Cesium.Color.fromCssColorString("#aeff00")}})}function _(r,t){return Cesium.Cartesian3.midpoint(r,t,new Cesium.Cartesian3)}function oe(r,t,d=!1,p){return viewer.entities.add({id:p,position:new Cesium.CallbackProperty(()=>r,!1),label:{text:t,font:d?"18px sans-serif":"14px sans-serif",fillColor:Cesium.Color.WHITE,verticalOrigin:d?Cesium.VerticalOrigin.TOP:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,d?20:-10),fillColor:d?Cesium.Color.fromCssColorString("#b8e065"):Cesium.Color.WHITE,backgroundColor:d?Cesium.Color.WHITE.withAlpha(0):Cesium.Color.fromCssColorString("#171719"),showBackground:!d}})}function qe(){[z,F,fe].forEach(r=>{r&&viewer.entities.remove(r)}),z=F=fe=null}function Ge(r){const t=new Cesium.Cartesian3;Cesium.Cartesian3.add(r[0],r[1],t),Cesium.Cartesian3.add(r[2],t,t),Cesium.Cartesian3.add(r[3],t,t);const d=Cesium.Cartesian3.multiplyByScalar(t,.25,new Cesium.Cartesian3),p=Cesium.Cartesian3.subtract(r[0],r[2],new Cesium.Cartesian3),E=Cesium.Cartesian3.subtract(r[1],r[3],new Cesium.Cartesian3),S=Cesium.Cartesian3.cross(p,E,new Cesium.Cartesian3);return{center:d,centerVector:S}}function pe(r,t,d){let p=[];for(let E=0;E<360;E+=10){const S=Cesium.Quaternion.fromAxisAngle(r,Cesium.Math.toRadians(E)),V=Cesium.Matrix3.fromQuaternion(S),i=Cesium.Matrix4.fromRotationTranslation(V),l=Cesium.Cartesian3.subtract(t,d,new Cesium.Cartesian3),o=Cesium.Matrix4.multiplyByPoint(i,l,new Cesium.Cartesian3),e=Cesium.Cartesian3.add(o,d,new Cesium.Cartesian3);p.push(e)}return p.push(p[0]),p}var I=[],H,we,z,F,fe,$,U;let x,Ce,ue=[],s={},le=[],u,D,W,Q,j,q,G,L,Y,B,K,J,ee,ie,se,ae,g,ne,te,re,M=[],ye=!1;const Ke=()=>{var r=new Cesium.ScreenSpaceEventHandler(viewer.canvas);r.setInputAction(function(i){const l=viewer.scene.pickPosition(i.position);if(!Cesium.defined(l))return;I.length===0&&(H=l,Ce=We(new Cesium.CallbackProperty(()=>{const e=[...I,H];if(e.length>=3){const[c,n,m]=e,y=Cesium.Cartesian3.subtract(m,n,new Cesium.Cartesian3),b=Cesium.Cartesian3.add(c,y,new Cesium.Cartesian3);return[c,n,m,b,c]}return e},!1)));const o=[...I,H];if(o.length===2){const[e,c,n]=o;je(e,c)}if(o.length>=3){const[e,c,n]=o,m=Cesium.Cartesian3.subtract(n,c,new Cesium.Cartesian3),y=Cesium.Cartesian3.add(e,m,new Cesium.Cartesian3);d(e,c,n,y),viewer.entities.remove(Ce),x=[e,c,n,y],S(),ke("ruler"),ke("tick"),r.destroy(),ue=x,we=Qe(x)}I.push(l),t(),o.length>=3&&viewer.entities.remove(viewer.entities.getById("angleLabel"))},Cesium.ScreenSpaceEventType.LEFT_CLICK),r.setInputAction(function(i){if(!H)return;const l=viewer.scene.pickPosition(i.endPosition);if(Cesium.defined(l)){if(H=l,I.length>=2){const o=viewer.camera.getPickRay(i.endPosition);if(o){const[e,c]=I,n=Cesium.Cartesian3.subtract(c,e,new Cesium.Cartesian3),m=Cesium.Plane.fromPointNormal(c,Cesium.Cartesian3.normalize(n,new Cesium.Cartesian3)),y=Cesium.IntersectionTests.rayPlane(o,m);y&&(H=y)}}t()}},Cesium.ScreenSpaceEventType.MOUSE_MOVE);function t(){qe();const i=[...I,H];if(i.length>=2){const e=Cesium.Cartesian3.midpoint(i[0],i[1],new Cesium.Cartesian3),c=Cesium.Cartesian3.distance(i[0],i[1]);z=oe(e,`${(c/1e3).toFixed(1)} km`,!1,"distanceLabel01")}if(i.length>=3){const e=Cesium.Cartesian3.midpoint(i[1],i[2],new Cesium.Cartesian3),c=Cesium.Cartesian3.distance(i[1],i[2]);F=oe(e,`${(c/1e3).toFixed(1)} km`,!1,"distanceLabel12");const n=me(i[0],i[1],90),m=Cesium.Cartesian3.subtract(i[2],i[1],new Cesium.Cartesian3),y=Cesium.Cartesian3.subtract(n,i[1],new Cesium.Cartesian3),b=Cesium.Math.toDegrees(Cesium.Cartesian3.angleBetween(y,m));var l=Cesium.Cartographic.fromCartesian(i[1]),o=Cesium.Cartographic.fromCartesian(i[2]);let N;l.height<o.height?(N=b,Ce.polyline.material=Cesium.Color.fromCssColorString("#2987f0")):(Ce.polyline.material=new Cesium.PolylineDashMaterialProperty({color:Cesium.Color.fromCssColorString("#2987f0")}),N=360-b),fe=oe(i[2],`${N.toFixed(1)}°`,!0,"angleLabel")}if(i.length>=4){const e=Cesium.Cartesian3.midpoint(x[2],x[3],new Cesium.Cartesian3),c=Cesium.Cartesian3.distance(x[2],x[3]);$=oe(e,`${(c/1e3).toFixed(1)} km`,!1,"distanceLabel23");const n=Cesium.Cartesian3.midpoint(x[3],x[0],new Cesium.Cartesian3),m=Cesium.Cartesian3.distance(x[3],x[0]);U=oe(n,`${(m/1e3).toFixed(1)} km`,!1,"distanceLabel34")}}function d(i,l,o,e){const c=_(i,e),n=_(l,o),m=_(i,l),y=_(o,e);u=_(i,o);const b=Cesium.Cartesian3.distance(l,o,new Cesium.Cartesian3),N=Cesium.Cartesian3.subtract(c,n,new Cesium.Cartesian3),a=Cesium.Cartesian3.subtract(m,y,new Cesium.Cartesian3),O=Cesium.Cartesian3.cross(N,a,new Cesium.Cartesian3),v=Cesium.Cartesian3.normalize(O,new Cesium.Cartesian3),A=Cesium.Cartesian3.add(Cesium.Cartesian3.multiplyByScalar(v,b/2,new Cesium.Cartesian3),u,new Cesium.Cartesian3),k=Cesium.Cartesian3.normalize(N,new Cesium.Cartesian3),X=Cesium.Cartesian3.add(u,Cesium.Cartesian3.multiplyByScalar(k,-b/2,new Cesium.Cartesian3),new Cesium.Cartesian3),w=Cesium.Cartesian3.normalize(a,new Cesium.Cartesian3),Z=Cesium.Cartesian3.add(u,Cesium.Cartesian3.multiplyByScalar(w,-b/2,new Cesium.Cartesian3),new Cesium.Cartesian3);D=viewer.entities.add({id:"axisX",polyline:{positions:[u,X],width:10,arcType:Cesium.ArcType.NONE,material:new Cesium.PolylineArrowMaterialProperty(Cesium.Color.fromCssColorString("#9ed81c"))}}),W=viewer.entities.add({id:"axisY",polyline:{positions:[u,Z],width:10,arcType:Cesium.ArcType.NONE,material:new Cesium.PolylineArrowMaterialProperty(Cesium.Color.fromCssColorString("#ec4346"))}}),Q=viewer.entities.add({id:"axisZ",polyline:{positions:[u,A],width:10,arcType:Cesium.ArcType.NONE,material:new Cesium.PolylineArrowMaterialProperty(Cesium.Color.fromCssColorString("#47dce4"))}}),s.axisX=[u,X],s.axisY=[u,Z],s.axisZ=[u,A];const T=Cesium.Cartesian3.distance(u,X,new Cesium.Cartesian3),f=Cesium.Cartesian3.multiplyByScalar(k,T*2,new Cesium.Cartesian3),C=Cesium.Cartesian3.add(u,f,new Cesium.Cartesian3),R=Cesium.Cartesian3.multiplyByScalar(k,-T*2,new Cesium.Cartesian3),P=Cesium.Cartesian3.add(u,R,new Cesium.Cartesian3),h=Cesium.Cartesian3.multiplyByScalar(w,T*2,new Cesium.Cartesian3),ce=Cesium.Cartesian3.add(u,h,new Cesium.Cartesian3),ge=Cesium.Cartesian3.multiplyByScalar(w,-T*2,new Cesium.Cartesian3),he=Cesium.Cartesian3.add(u,ge,new Cesium.Cartesian3),Ne=Cesium.Cartesian3.multiplyByScalar(v,T*2,new Cesium.Cartesian3),be=Cesium.Cartesian3.add(u,Ne,new Cesium.Cartesian3),Te=Cesium.Cartesian3.multiplyByScalar(v,-T*2,new Cesium.Cartesian3),Pe=Cesium.Cartesian3.add(u,Te,new Cesium.Cartesian3),Me=de([P,C],"dashX"),Ze=de([he,ce],"dashY"),Be=de([Pe,be],"dashZ");M.push(Me),M.push(Ze),M.push(Be),s.dashX=[P,C],s.dashY=[he,ce],s.dashZ=[Pe,be],ne=Cesium.Cartesian3.subtract(A,u,new Cesium.Cartesian3);const Ae=Cesium.Cartesian3.normalize(ne,new Cesium.Cartesian3),Xe=Cesium.Cartesian3.add(u,Cesium.Cartesian3.multiplyByScalar(k,-b/3,new Cesium.Cartesian3),new Cesium.Cartesian3),ve=pe(Ae,Xe,u);G=viewer.entities.add({id:"sphereZ",polyline:{positions:ve,width:3,arcType:Cesium.ArcType.NONE,material:Cesium.Color.fromCssColorString("#47dce4")}}),re=Cesium.Cartesian3.subtract(c,u,new Cesium.Cartesian3);var Le=Cesium.Cartesian3.normalize(re,new Cesium.Cartesian3);const Ye=Cesium.Cartesian3.add(u,Cesium.Cartesian3.multiplyByScalar(w,-b/3,new Cesium.Cartesian3),new Cesium.Cartesian3),xe=pe(Le,Ye,u);j=viewer.entities.add({id:"sphereX",polyline:{positions:xe,width:3,arcType:Cesium.ArcType.NONE,material:Cesium.Color.fromCssColorString("#9ed81c")}}),te=Cesium.Cartesian3.subtract(m,u,new Cesium.Cartesian3);var Oe=Cesium.Cartesian3.normalize(te,new Cesium.Cartesian3);const _e=Cesium.Cartesian3.add(u,Cesium.Cartesian3.multiplyByScalar(v,-b/3,new Cesium.Cartesian3),new Cesium.Cartesian3),Se=pe(Oe,_e,u);q=viewer.entities.add({id:"sphereY",polyline:{positions:Se,width:3,arcType:Cesium.ArcType.NONE,material:Cesium.Color.fromCssColorString("#ec4346")}}),s.sphereX=xe,s.sphereY=Se,s.sphereZ=ve,p()}function p(){const i=new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);let l,o,e;i.setInputAction(c=>{const n=viewer.scene.pick(c.position);if(l=c.position.x,c.position.y,Cesium.defined(n)){if(!n.id||n.id.id==="polygon")return;ye=!0,viewer.scene.screenSpaceCameraController.enableRotate=!1,x=ue,viewer.screenSpaceEventHandler.setInputAction(m=>{const y=viewer.scene.pick(m.endPosition);y&&y.id.id.slice(0,4)==="axis"?V(n):M.forEach(f=>{f.show=!1}),o=m.endPosition.x,m.endPosition.y;const b=Cesium.SceneTransforms.worldToWindowCoordinates(viewer.scene,u),N=Cesium.SceneTransforms.worldToWindowCoordinates(viewer.scene,s[n.id.id][1]),O=Cesium.Cartesian3.distance(u,s[n.id.id][1],new Cesium.Cartesian3)/(b.x-N.x);if(e=(l-o)*O,n.id.id.slice(0,6)==="sphere"){let f;n.id.id==="sphereX"?f=re:n.id.id==="sphereY"?f=te:n.id.id==="sphereZ"&&(f=ne),D.show=n.id.id==="sphereX",W.show=n.id.id==="sphereY",Q.show=n.id.id==="sphereZ",j.show=n.id.id==="sphereX",q.show=n.id.id==="sphereY",G.show=n.id.id==="sphereZ";const C=Cesium.Cartesian3.normalize(f,new Cesium.Cartesian3);var v=Cesium.Quaternion.fromAxisAngle(C,Cesium.Math.toRadians(e)),A=Cesium.Matrix3.fromQuaternion(v),k=Cesium.Matrix4.fromRotationTranslation(A);g=x.map(R=>{var P=Cesium.Cartesian3.subtract(R,u,new Cesium.Cartesian3),h=Cesium.Matrix4.multiplyByPoint(k,P,new Cesium.Cartesian3);return Cesium.Cartesian3.add(h,u,new Cesium.Cartesian3)})}if(n.id.id.slice(0,4)==="axis"){let f,C=n.id.id;C==="axisZ"?f=ne:C==="axisX"?f=re:C==="axisY"&&(f=te);const R=Cesium.Cartesian3.normalize(f,new Cesium.Cartesian3),P=Cesium.Cartesian3.multiplyByScalar(R,e,new Cesium.Cartesian3);g=x.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),we.polygon.hierarchy=new Cesium.CallbackProperty(()=>new Cesium.PolygonHierarchy(g),!1),L=s.axisX.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),Y=s.axisY.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),B=s.axisZ.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),D.polyline.positions=new Cesium.CallbackProperty(()=>L,!1),W.polyline.positions=new Cesium.CallbackProperty(()=>Y,!1),Q.polyline.positions=new Cesium.CallbackProperty(()=>B,!1),ie=s.sphereX.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),se=s.sphereY.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),ae=s.sphereZ.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),j.polyline.positions=new Cesium.CallbackProperty(()=>ie,!1),q.polyline.positions=new Cesium.CallbackProperty(()=>se,!1),G.polyline.positions=new Cesium.CallbackProperty(()=>ae,!1),K=s.dashX.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),J=s.dashY.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),ee=s.dashZ.map(h=>Cesium.Cartesian3.add(h,P,new Cesium.Cartesian3)),M[0].polyline.positions=new Cesium.CallbackProperty(()=>K,!1),M[1].polyline.positions=new Cesium.CallbackProperty(()=>J,!1),M[2].polyline.positions=new Cesium.CallbackProperty(()=>ee,!1)}we.polygon.hierarchy=new Cesium.CallbackProperty(()=>new Cesium.PolygonHierarchy(g),!1);const X=_(g[0],g[3]),w=_(g[1],g[2]),Z=_(g[0],g[1]),T=_(g[2],g[3]);z.position=new Cesium.CallbackProperty(()=>Z,!1),F.position=new Cesium.CallbackProperty(()=>w,!1),$.position=new Cesium.CallbackProperty(()=>T,!1),U.position=new Cesium.CallbackProperty(()=>X,!1),ue=g},Cesium.ScreenSpaceEventType.MOUSE_MOVE),viewer.screenSpaceEventHandler.setInputAction(({position:m})=>{n.id.id.slice(0,4)==="axis"&&(s.axisX=L,s.axisY=Y,s.axisZ=B,s.sphereX=ie,s.sphereY=se,s.sphereZ=ae,s.dashX=K,s.dashY=J,s.dashZ=ee,re=Cesium.Cartesian3.subtract(L[1],L[0],new Cesium.Cartesian3),te=Cesium.Cartesian3.subtract(Y[1],Y[0],new Cesium.Cartesian3),ne=Cesium.Cartesian3.subtract(B[1],B[0],new Cesium.Cartesian3),u=B[0]),D.show=!0,W.show=!0,Q.show=!0,j.show=!0,q.show=!0,G.show=!0,ye=!1,viewer.scene.screenSpaceCameraController.enableRotate=!0,viewer.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)},Cesium.ScreenSpaceEventType.LEFT_UP)}},Cesium.ScreenSpaceEventType.LEFT_DOWN)}new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas).setInputAction(i=>{if(le.length===0){const l=viewer.scene.pick(i.position);if(Cesium.defined(l)){if(!l.id)return;const o=l.id,e=ue;e.forEach((n,m)=>{const y=viewer.entities.add({id:"point"+m,position:n,point:{color:new Cesium.Color(0,1,1,.9),pixelSize:8}});le.push(y)}),new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas).setInputAction(n=>{let m,y;const b=viewer.scene.pick(n.position);if(Cesium.defined(b)){if(!b.id)return;if(b.id.id.slice(0,5)==="point"){let N=b.id,a=b.id.id.slice(5);viewer.scene.screenSpaceCameraController.enableRotate=!1,viewer.screenSpaceEventHandler.setInputAction(O=>{const v=viewer.camera.getPickRay(O.endPosition);if(v){const A=Ge(e);m=A.center,y=A.centerVector;const k=Cesium.Plane.fromPointNormal(m,Cesium.Cartesian3.normalize(y,new Cesium.Cartesian3)),X=Cesium.IntersectionTests.rayPlane(v,k);e[Number(a)]=X,N.position=new Cesium.CallbackProperty(()=>X,!1),Number(a)===0&&(z.position=new Cesium.CallbackProperty(()=>Cesium.Cartesian3.midpoint(e[Number(a)+1],e[Number(a)],new Cesium.Cartesian3),!1),z.label.text=new Cesium.CallbackProperty(()=>`${(Cesium.Cartesian3.distance(e[Number(a)+1],e[Number(a)],new Cesium.Cartesian3)/1e3).toFixed(1)} km`,!1),U.position=new Cesium.CallbackProperty(()=>Cesium.Cartesian3.midpoint(e[Number(a)+3],e[Number(a)],new Cesium.Cartesian3),!1),U.label.text=new Cesium.CallbackProperty(()=>`${(Cesium.Cartesian3.distance(e[Number(a)+3],e[Number(a)],new Cesium.Cartesian3)/1e3).toFixed(1)} km`,!1)),Number(a)===1&&(z.position=new Cesium.CallbackProperty(()=>Cesium.Cartesian3.midpoint(e[Number(a)+1],e[Number(a)],new Cesium.Cartesian3),!1),z.label.text=new Cesium.CallbackProperty(()=>`${(Cesium.Cartesian3.distance(e[Number(a)+1],e[Number(a)],new Cesium.Cartesian3)/1e3).toFixed(1)} km`,!1),F.position=new Cesium.CallbackProperty(()=>Cesium.Cartesian3.midpoint(e[Number(a)-1],e[Number(a)],new Cesium.Cartesian3),!1),F.label.text=new Cesium.CallbackProperty(()=>`${(Cesium.Cartesian3.distance(e[Number(a)-1],e[Number(a)],new Cesium.Cartesian3)/1e3).toFixed(1)} km`,!1)),Number(a)===2&&(F.position=new Cesium.CallbackProperty(()=>Cesium.Cartesian3.midpoint(e[Number(a)-1],e[Number(a)],new Cesium.Cartesian3),!1),F.label.text=new Cesium.CallbackProperty(()=>`${(Cesium.Cartesian3.distance(e[Number(a)-1],e[Number(a)],new Cesium.Cartesian3)/1e3).toFixed(1)} km`,!1),$.position=new Cesium.CallbackProperty(()=>Cesium.Cartesian3.midpoint(e[Number(a)+1],e[Number(a)],new Cesium.Cartesian3),!1),$.label.text=new Cesium.CallbackProperty(()=>`${(Cesium.Cartesian3.distance(e[Number(a)+1],e[Number(a)],new Cesium.Cartesian3)/1e3).toFixed(1)} km`,!1)),Number(a)===3&&(U.position=new Cesium.CallbackProperty(()=>Cesium.Cartesian3.midpoint(e[Number(a)-3],e[Number(a)],new Cesium.Cartesian3),!1),U.label.text=new Cesium.CallbackProperty(()=>`${(Cesium.Cartesian3.distance(e[Number(a)-3],e[Number(a)],new Cesium.Cartesian3)/1e3).toFixed(1)} km`,!1),$.position=new Cesium.CallbackProperty(()=>Cesium.Cartesian3.midpoint(e[Number(a)-1],e[Number(a)],new Cesium.Cartesian3),!1),$.label.text=new Cesium.CallbackProperty(()=>`${(Cesium.Cartesian3.distance(e[Number(a)-1],e[Number(a)],new Cesium.Cartesian3)/1e3).toFixed(1)} km`,!1)),o.polygon.hierarchy=new Cesium.CallbackProperty(()=>new Cesium.PolygonHierarchy(e),!1);const w=Cesium.Cartesian3.distance(m,u,new Cesium.Cartesian3),Z=Cesium.Cartesian3.subtract(m,u,new Cesium.Cartesian3),T=Cesium.Cartesian3.normalize(Z,new Cesium.Cartesian3),f=Cesium.Cartesian3.multiplyByScalar(T,w,new Cesium.Cartesian3);L=s.axisX.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),Y=s.axisY.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),B=s.axisZ.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),D.polyline.positions=new Cesium.CallbackProperty(()=>L,!1),W.polyline.positions=new Cesium.CallbackProperty(()=>Y,!1),Q.polyline.positions=new Cesium.CallbackProperty(()=>B,!1),ie=s.sphereX.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),se=s.sphereY.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),ae=s.sphereZ.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),j.polyline.positions=new Cesium.CallbackProperty(()=>ie,!1),q.polyline.positions=new Cesium.CallbackProperty(()=>se,!1),G.polyline.positions=new Cesium.CallbackProperty(()=>ae,!1),K=s.dashX.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),J=s.dashY.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),ee=s.dashZ.map(C=>Cesium.Cartesian3.add(C,f,new Cesium.Cartesian3)),M[0].polyline.positions=new Cesium.CallbackProperty(()=>K,!1),M[1].polyline.positions=new Cesium.CallbackProperty(()=>J,!1),M[2].polyline.positions=new Cesium.CallbackProperty(()=>ee,!1)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),viewer.screenSpaceEventHandler.setInputAction(({position:O})=>{viewer.scene.screenSpaceCameraController.enableRotate=!0,s.axisX=L,s.axisY=Y,s.axisZ=B,s.sphereX=ie,s.sphereY=se,s.sphereZ=ae,s.dashX=K,s.dashY=J,s.dashZ=ee,re=Cesium.Cartesian3.subtract(L[1],L[0],new Cesium.Cartesian3),te=Cesium.Cartesian3.subtract(Y[1],Y[0],new Cesium.Cartesian3),ne=Cesium.Cartesian3.subtract(B[1],B[0],new Cesium.Cartesian3),u=m,x=e,viewer.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)},Cesium.ScreenSpaceEventType.LEFT_UP)}}},Cesium.ScreenSpaceEventType.LEFT_DOWN)}}else le.forEach(l=>{viewer.entities.remove(l)}),le=[]},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);function S(){new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas).setInputAction(l=>{const o=viewer.scene.pick(l.endPosition);o&&!ye&&(o.id.id!=="polygon"&&o.id.id.slice(0,5)!=="point"&&o.id.id.slice(0,4)!=="dash"?V(o):M.forEach(e=>{e.show=!1}))},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}function V(i){Q.polyline.width=new Cesium.CallbackProperty(()=>i&&i.id.id==="axisZ"?15:10,!1),D.polyline.width=new Cesium.CallbackProperty(()=>i&&i.id.id==="axisX"?15:10,!1),W.polyline.width=new Cesium.CallbackProperty(()=>i&&i.id.id==="axisY"?15:10,!1),j.polyline.width=new Cesium.CallbackProperty(()=>i&&i.id.id==="sphereX"?6:3,!1),q.polyline.width=new Cesium.CallbackProperty(()=>i&&i.id.id==="sphereY"?6:3,!1),G.polyline.width=new Cesium.CallbackProperty(()=>i&&i.id.id==="sphereZ"?6:3,!1);let l=i.id.id;M.forEach(o=>{l==="axisZ"?o.show=o.id==="dashZ":l==="axisX"?o.show=o.id==="dashX":l==="axisY"&&(o.show=o.id==="dashY")})}},Je={class:"toolButton"},ei={__name:"index",setup(r){const t=()=>{Ke()};return(d,p)=>{const E=$e("el-button");return Ue(),Fe(He,null,[Ee(Ve),Re("div",Je,[Ee(E,{type:"primary",onClick:p[0]||(p[0]=S=>t())},{default:Ie(()=>p[1]||(p[1]=[De("平移旋转")])),_:1})])],64)}}},ni=ze(ei,[["__scopeId","data-v-0776fe12"]]);export{ni as default};
