import{E as b}from"./index-hnr1oFTy.js";import{m as B,l as w,p as A,w as E,C as h}from"./CesiumEarth-DSJv-lZu.js";import{_ as x,f as g,c as P,a,b as V,w as n,F as T,r as c,o as N,d as p}from"./index-Do2SFHFE.js";class R{constructor(e){e&&(this.viewer=e,this.bufferCollection=[])}PointBuffer(e,o,t){console.log(e);const r=B(e);this.calculateBuffer(r,o,t)}PolylineBuffer(e,o,t){const r=w(e);this.calculateBuffer(r,o,t)}PolygonBuffer(e,o,t){e=[e];const r=A(e);this.calculateBuffer(r,o,t)}calculateBuffer(e,o,t){const r=E(e,o,{units:"meters"}),m=r?r.geometry.coordinates[0]:[],s=this.translateDegreesArray(m),l=this.viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArray(s),width:2,material:Cesium.Color.ORANGE,clampToGround:!0},polygon:{hierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(s)),heightReference:Cesium.HeightReference.CLAMP_TO_GROUND,material:Cesium.Color.ORANGE.withAlpha(.4)}}),i={type:"PolylineBuffer",geojson:r,degreesArray:s,entity:l};this.bufferCollection.push(i),t&&typeof t=="function"&&t(i)}translateDegreesArray(e){const o=[];for(let t=0;t<e.length;t++){const r=e[t];o.push(r[0],r[1])}return o}removeAll(){this.bufferCollection.forEach(e=>{this.viewer.entities.remove(e.entity)}),this.bufferCollection=[]}}const k={class:"toolButton"},D={__name:"index",setup(y){const e=g(1e3),o=g("point"),t=[],r=()=>{new h().drawShapeTool(o.value,t)},m=()=>{if(t.length===0)return;const s=new h;let l=new R(viewer);switch(o.value){case"point":const i=s.cartesianToCartographic(t[0]);l.PointBuffer([i.lon,i.lat],e.value,f=>{});break;case"line":l.PolylineBuffer(t.map(f=>{const u=s.cartesianToCartographic(f);return[u.lon,u.lat]}),e.value,f=>{});break;case"polygon":t.push(t[0]),l.PolygonBuffer(t.map(f=>{const u=s.cartesianToCartographic(f);return[u.lon,u.lat]}),e.value,f=>{});break}};return(s,l)=>{const i=c("el-radio"),f=c("el-radio-group"),u=c("el-form-item"),C=c("el-input"),_=c("el-button"),v=c("el-form");return N(),P(T,null,[a(b),V("div",k,[a(v,{inline:!0,"label-position":"right","label-width":"auto"},{default:n(()=>[a(u,{label:"缓冲区类型"},{default:n(()=>[a(f,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=d=>o.value=d)},{default:n(()=>[a(i,{value:"point"},{default:n(()=>[p("点")]),_:1}),a(i,{value:"line"},{default:n(()=>[p("线")]),_:1}),a(i,{value:"polygon"},{default:n(()=>[p("面")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"缓冲区区域"},{default:n(()=>[a(C,{modelValue:e.value,"onUpdate:modelValue":l[1]||(l[1]=d=>e.value=d),max:1e4,min:1},{append:n(()=>[p("千米")]),_:1},8,["modelValue"])]),_:1}),a(u,null,{default:n(()=>[a(_,{type:"primary",onClick:r},{default:n(()=>[p("绘制缓冲区")]),_:1}),a(_,{type:"primary",onClick:m},{default:n(()=>[p("缓冲区分析")]),_:1})]),_:1})]),_:1})])],64)}}},$=x(D,[["__scopeId","data-v-0f5be15d"]]);export{$ as default};
