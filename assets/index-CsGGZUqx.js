import{W as y,P as R,S as b,M as w,D as j,V as z,L as O,a as x,G,b as T}from"./three.module-BG7GZZT6.js";import{_ as J,j as k,c as A,b as S,o as P}from"./index-DQxC938F.js";const V={class:"container"},L={__name:"index",setup(N){let h=null;const a={renderer:null,camera:null,scene:null};let r=[115.23,39.55],i=[116.23,41.55];const d=[];k(()=>{W(),I(),g(),f()});function W(){Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkNzA0ZjJjMC0zOGZjLTRlZWMtOWYxYS05MzJjY2IwOGFjOTMiLCJpZCI6NDIyOTUsImlhdCI6MTYxMTE5NDg1Mn0.IFn2soVn2z-RCd2CyJmMiA89HySSOp3btiuxEMTfThc",h=new Cesium.Viewer("cesiumContainer");const e=Cesium.Cartesian3.fromDegrees((r[0]+i[0])/2,(r[1]+i[1])/2-1,2e5);h.camera.flyTo({destination:e,orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-60),roll:Cesium.Math.toRadians(0)},duration:3})}function I(){const e=document.querySelector("#threeContainer"),t=new y({canvas:e,alpha:!0,logarithmicDepthBuffer:!0,antialias:!0});var o=45,s=e.clientWidth,c=e.clientHeight,m=s/c,u=1,n=10*1e3*1e3;const l=new R(o,m,u,n),v=new b;a.renderer=t,a.scene=v,a.camera=l}function g(){for(var e=new w({side:j}),t=10,o=[],s=0;s<t;s++)o.push(new z(Math.sin(s*.2)*t+5,(s-5)*2));var c=new O(o),m=new x(c,e);m.scale.set(1500,1500,1500),m.position.z+=15e3,m.rotation.x=Math.PI/2;var u=new G;u.add(m),a.scene.add(u);var n=new C;n.threeMesh=u,n.minWGS84=r,n.maxWGS84=i,d.push(n),c=new T;var l=new x(c,new w);l.scale.set(1e4,1e4,1e4),l.position.z+=1e4,l.rotation.x=Math.PI/2;var v=new G;v.add(l),a.scene.add(v),n=new C,n.threeMesh=v,n.minWGS84=r,n.maxWGS84=i,d.push(n);for(const M in d){r=d[M].minWGS84,i=d[M].maxWGS84,console.log(r);const D=Cesium.Cartesian3.fromDegrees((r[0]+i[0])/2,(r[1]+i[1])/2),p=Cesium.Cartesian3.fromDegrees((r[0]+i[0])/2,(r[1]+i[1])/2,1);d[M].threeMesh.position.copy(D),d[M].threeMesh.lookAt(p.x,p.y,p.z)}}function _(){a.camera.matrixAutoUpdate=!1;const e=h.camera.viewMatrix,t=h.camera.inverseViewMatrix;a.camera.lookAt(0,0,0),a.camera.matrixWorld.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]),a.camera.matrixWorldInverse.set(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]);const o=a.renderer.domElement;a.renderer.setPixelRatio(window.devicePixelRatio);const s=o.clientWidth,c=o.clientHeight;(o.width!==s||o.height!==c)&&a.renderer.setSize(s,c,!1),a.camera.aspect=s/c,a.camera.fov=Cesium.Math.toDegrees(h.camera.frustum.fovy),a.camera.updateProjectionMatrix(),a.renderer.render(a.scene,a.camera)}function f(){h.render(),_(),requestAnimationFrame(f)}function C(){this.threeMesh=null,this.minWGS84=null,this.maxWGS84=null}return(e,t)=>(P(),A("div",V,t[0]||(t[0]=[S("div",{id:"cesiumContainer"},null,-1),S("canvas",{id:"threeContainer"},null,-1)])))}},E=J(L,[["__scopeId","data-v-2277687b"]]);export{E as default};
