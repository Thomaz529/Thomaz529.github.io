import{E as b}from"./index-DQKEvUsp.js";import{m as B,l as w,p as A,w as E,C as y}from"./CesiumEarth-D0reHEmA.js";import{_ as x,e as _,c as P,a as l,b as V,w as a,F as T,r as p,o as N,d as c}from"./index-DQxC938F.js";class R{constructor(e){e&&(this.viewer=e,this.bufferCollection=[])}PointBuffer(e,r,o){console.log(e);const n=B(e);this.calculateBuffer(n,r,o)}PolylineBuffer(e,r,o){const n=w(e);this.calculateBuffer(n,r,o)}PolygonBuffer(e,r,o){e=[e];const n=A(e);this.calculateBuffer(n,r,o)}calculateBuffer(e,r,o){const n=E(e,r,{units:"meters"}),m=n?n.geometry.coordinates[0]:[],s=this.translateDegreesArray(m),t=this.viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArray(s),width:2,material:Cesium.Color.ORANGE,clampToGround:!0},polygon:{hierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(s)),heightReference:Cesium.HeightReference.CLAMP_TO_GROUND,material:Cesium.Color.ORANGE.withAlpha(.4)}}),i={type:"PolylineBuffer",geojson:n,degreesArray:s,entity:t};this.bufferCollection.push(i),o&&typeof o=="function"&&o(i)}translateDegreesArray(e){const r=[];for(let o=0;o<e.length;o++){const n=e[o];r.push(n[0],n[1])}return r}removeAll(){this.bufferCollection.forEach(e=>{this.viewer.entities.remove(e.entity)}),this.bufferCollection=[]}}const k={class:"toolButton"},D={__name:"index",setup(h){const e=_(1e3),r=_("point"),o=[],n=()=>{new y().drawShapeTool(r.value,o)},m=()=>{if(o.length===0)return;const s=new y;let t=new R(viewer);switch(r.value){case"point":const i=s.cartesianToCartographic(o[0]);t.PointBuffer([i.lon,i.lat],e.value,f=>{});break;case"line":t.PolylineBuffer(o.map(f=>{const u=s.cartesianToCartographic(f);return[u.lon,u.lat]}),e.value,f=>{});break;case"polygon":o.push(o[0]),t.PolygonBuffer(o.map(f=>{const u=s.cartesianToCartographic(f);return[u.lon,u.lat]}),e.value,f=>{});break}};return(s,t)=>{const i=p("el-radio"),f=p("el-radio-group"),u=p("el-form-item"),C=p("el-input"),g=p("el-button"),v=p("el-form");return N(),P(T,null,[l(b),V("div",k,[l(v,{inline:!0,"label-position":"right","label-width":"auto"},{default:a(()=>[l(u,{label:"缓冲区类型"},{default:a(()=>[l(f,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=d=>r.value=d)},{default:a(()=>[l(i,{value:"point"},{default:a(()=>t[2]||(t[2]=[c("点")])),_:1}),l(i,{value:"line"},{default:a(()=>t[3]||(t[3]=[c("线")])),_:1}),l(i,{value:"polygon"},{default:a(()=>t[4]||(t[4]=[c("面")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"缓冲区区域"},{default:a(()=>[l(C,{modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=d=>e.value=d),max:1e4,min:1},{append:a(()=>t[5]||(t[5]=[c("千米")])),_:1},8,["modelValue"])]),_:1}),l(u,null,{default:a(()=>[l(g,{type:"primary",onClick:n},{default:a(()=>t[6]||(t[6]=[c("绘制缓冲区")])),_:1}),l(g,{type:"primary",onClick:m},{default:a(()=>t[7]||(t[7]=[c("缓冲区分析")])),_:1})]),_:1})]),_:1})])],64)}}},$=x(D,[["__scopeId","data-v-0f5be15d"]]);export{$ as default};
