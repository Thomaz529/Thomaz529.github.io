import{E as k}from"./index-hnr1oFTy.js";import{a as E,C as B}from"./CesiumEarth-DSJv-lZu.js";import{_ as O,c as L,a as h,b as Y,w as p,F as V,r as H,o as J,d as A}from"./index-Do2SFHFE.js";const W=`float hash(float x)
{
  return fract(21654.6512 * sin(385.51 * x));
}
float hash(vec2 p)
{
  return fract(1654.65157 * sin(15.5134763 * p.x + 45.5173247 * p.y + 5.21789));
}
vec2 hash2(vec2 p)
{
  return vec2(hash(p * .754), hash(1.5743 * p + 4.5476351));
}
vec2 add = vec2(1.0, 0.0);
vec2 noise2(vec2 x)
{
vec2 p = floor(x);
vec2 f = fract(x);
  f = f * f * (3.0 - 2.0 * f);
vec2 res = mix(mix(hash2(p),
hash2(p + add.xy), f.x),
mix(hash2(p + add.yx), hash2(p + add.xx), f.x), f.y);
  return res;
}
vec2 fbm2(vec2 x)
{
vec2 r = vec2(0.0);
float a = 1.0;
  for (int i = 0; i < 8; i++)
{
r += noise2(x) * a;
x *= 2.;
a *= .5;
}
  return r;
}
float dseg(vec2 ba, vec2 pa)
{
float h = clamp(dot(pa, ba) / dot(ba, ba), -0.2, 1.);
  return length(pa - ba * h);
}
uniform sampler2D colorTexture; 
uniform float fall_interval; 
uniform float mix_factor; 
in vec2 v_textureCoordinates; 
void main(void){
vec2 uv = gl_FragCoord.xy; 
float iTime = czm_frameNumber * fall_interval * clamp(fall_interval * 0.1, 0.01, 0.1); 
vec2 p = uv / czm_viewport.zw; 
vec2 d; 
vec2 tgt = vec2(1., -1.); 
float c = 0.; 
  if (p.y >= 0.) 
  c = (1. - (fbm2((p + .2) * p.y + .1 * iTime)).x) * p.y; 
else 
  c = (1. - (fbm2(p + .2 + .1 * iTime)).x) * p.y * p.y; 
vec3 col = vec3(0.); 
//用分布朗运动模拟乌云
vec3 col1 = c * vec3(.3, .5, 1.); 
float mdist = 100000.; 
float t = hash(floor(5. * iTime)); 
  tgt += 4. * hash2(tgt + t) - 1.5; 
  if (hash(t + 2.3) > .6) 
  for (int i = 0; i < 100; i++) {
vec2 dtgt = tgt - p; 
d = .05 * (vec2(-.5, -1.) + hash2(vec2(float(i), t))); 
//点d到选段dtgt的距离
float dist = dseg(d, dtgt); 
//求最小距离(https://blog.csdn.net/weixin_43751272/article/details/114017953
mdist = min(mdist, dist); 
tgt -= d; 
c = exp(-1.2 * dist) + exp(-55. * mdist); 
col = c * vec3(.7, .8, 1.); 
  } 
  //加上乌云
  col += col1; 
  out_FragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(col, 0.0), mix_factor); 
} 
`,M=function(a,t,e,i){if(!a)return;e=e||{};let m=e.id||Q();if(a.entities.getById(m))return;let n=e.color||Cesium.Color.RED,C=e.outlineColor||n.withAlpha(1),l=e.outlineWidth||2;const c=new Cesium.ScreenSpaceEventHandler(a.canvas);let u,r,s,d=!0,o,v,T,x="左键按下开始绘制";c.setInputAction(function(g){let w=g.position,f=D(a,w);a.scene.screenSpaceCameraController.enableRotate=!1,a.scene.screenSpaceCameraController.enableZoom=!1,f&&(u=f,r=f,x="移动鼠标，左键抬起结束绘制")},Cesium.ScreenSpaceEventType.LEFT_DOWN),c.setInputAction(function(g){let w=g.endPosition;E(x,w,!0),u&&(r=D(a,w)),!Cesium.defined(s)&&u&&r&&(s=a.entities.add({rectangle:{coordinates:new Cesium.CallbackProperty(function(){let f,y,P,S;u.lng>r.lng?(f=u.lng,y=r.lng):(f=r.lng,y=u.lng),u.lat>r.lat?(P=u.lat,S=r.lat):(P=r.lat,S=u.lat);let b=Cesium.Cartesian3.fromDegrees(y,S),I=Cesium.Cartesian3.fromDegrees(f,S);v=Cesium.Cartesian3.distance(b,I);let F=Cesium.Cartesian3.fromDegrees(y,S),G=Cesium.Cartesian3.fromDegrees(y,P);o=Cesium.Cartesian3.distance(F,G);let U=Cesium.Cartesian3.fromDegrees(y,S),z=Cesium.Cartesian3.fromDegrees(f,P);return T=Cesium.Cartesian3.midpoint(U,z,new Cesium.Cartesian3),Cesium.Rectangle.fromDegrees(y,S,f,P)},!1),material:n,extrudedHeight:10,height:10,outline:!0,outlineColor:C,outlineWidth:l}}))},Cesium.ScreenSpaceEventType.MOUSE_MOVE),c.setInputAction(function(g){a.scene.screenSpaceCameraController.enableRotate=!0,a.scene.screenSpaceCameraController.enableZoom=!0,E(x,g.position,!1),s.LANG=v,s.WIDTH=o;let w=N(a,T);s.centerPoint=w,console.log(o,v,w),c.destroy(),d=!1,typeof i=="function"&&i(s)},Cesium.ScreenSpaceEventType.LEFT_UP),document.onkeydown=function(g){if(g.ctrlKey&&window.event.keyCode==90){if(!d)return!1;anchorpoints.pop(),anchorpoints.length==2}}};function D(a,t){let e=a.scene.drillPick(t),i=null,m=!1,n=!1;for(let l in e){let c=e[l];if((c&&c.primitive instanceof Cesium.Cesium3DTileFeature||c&&c.primitive instanceof Cesium.Cesium3DTileset||c&&c.primitive instanceof Cesium.Model)&&(m=!0),m&&(a.scene.pick(t),i=a.scene.pickPosition(t),i)){let u=Cesium.Cartographic.fromCartesian(i);u.height<0&&(u.height=0);let r=Cesium.Math.toDegrees(u.longitude),s=Cesium.Math.toDegrees(u.latitude),d=u.height;i=R(a,{lng:r,lat:s,alt:d})}}let C=a.terrainProvider instanceof Cesium.EllipsoidTerrainProvider;if(!m&&!C){let l=a.scene.camera.getPickRay(t);if(!l)return null;i=a.scene.globe.pick(l,a.scene),n=!0}if(!m&&!n&&C&&(i=a.scene.camera.pickEllipsoid(t,a.scene.globe.ellipsoid)),i){let l=N(a,i);return l.alt<0&&(i=R(a,l,.1)),l}return!1}function R(a,t,e){return t?Cesium.Cartesian3.fromDegrees(t.lng||t.lon,t.lat,t.alt=e||t.alt,Cesium.Ellipsoid.WGS84):Cesium.Cartesian3.ZERO}function N(a,t){let i=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t);return{lng:Cesium.Math.toDegrees(i.longitude),lat:Cesium.Math.toDegrees(i.latitude),alt:i.height}}function Q(a){let t=a||32,e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",i=e.length,m="";for(let n=0;n<t;n++)m+=e.charAt(Math.floor(Math.random()*i));return m}class X{constructor(t,e){t&&(this._viewer=t,this.boxEntity=null,this.rainParticleSize=e.rainParticleSize||12,this.emissionRate=e.emissionRate||4e3,this.height=e.height||4e4,this.ParticleSystem=null,this.image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xOdTWsmQAAANMSURBVFhH7dc9j41BGMbx3bVrNwQJEq+dlwpB+AB0FEoaJQU+goSOEC3fAAndNgpaGq0CBRWV0ImIOK7fyT2bk33snuMUu4qd5J9M5r7ua56ZuWfO7sRa++9br9drTIapMB1mwmyYK/SNidHQ9vPGbs2gzNaF9WFD2BK2hR1hV6FvTIyGVs54H9KSgtVYGdOtYXfYFw6F4+FkoW9MjIZWjlweo39EE1eilWwKO8OBcCKcDufChXCx0DcmRkMrRy6P0T+ihG1yW7onHA6nwvlwNVwPt8K9Qt+YGA2tHLk8Fj5i2UYQnJut8/UMjoYz4VK4Ee6HR2E+PCv0jYnR0MqRy4MXz35NLNkEg+JxfrbQKhhdCXfCw/A8vA5vwttC35gYDa0cuTx48eRds/2lJegLbZcico620moYPgkvw7vwKXwJ3wp9Y2I0tHLk8uDFk/dkTddtCTonX6qSFZPztKVWxfhD+Bq+h5/hV6FvTIyGVo5cHrx48p6q6botQQ+JonGdVLSicq621upM8COY9PcijInR0MqRy4MXT97TNV23JahQPCjutGulshWX87XFVjk4eWuDH0FDK0cuD148ec/UdN2WoCfVq+ZhcbddLxWuyJyzrV48eWttnIZWjlwevHjynq3pui1B77qn1evmgXHHXTOVrtja6pdqYjS0cuTy4MWT91xN122CJVq1D1j1I1CE28NgET4OCupzGLUIaeXIHSxC3ssWYbuG+4Orcy08CC/C+zDqNaSVI5cHL55Dr2F7iLzfHg9bdzO4Tq/Cx2ACq7TVJoW+MTEaWjlyefDiOfQhGnyKDwZffjncDU8DY6uzxc5ZsUHfmBgNrRy5PHiN9BTDD8bG4AfkSDgbvGYMrcrWOl9FptKhb0yMhlaOXB68eA79MWq7oBg3h73hWGBkNbbUuSouFe6aQd+YGA2tHLk8eA3/OdYIglpwJRUNA6uwlc5TUans28Edh74xMRpaOXJ58Br+B4lGVLSP8PW20DkqJuaulYk8MNA3JkZDK0fuwuQYqTVxJdo656eIVLLr5E57WLxu0DcmRkMrR+6/Td5aSwrOTfGoYNfIlnpQvGqeVugbE6OhldM/c4zdmkGZWc3K/GOy1lamTUz8Af7rUXt1Ah4SAAAAAElFTkSuQmCC")}CreateRangeAnalysis(){let t=this;M(t._viewer,[],{color:Cesium.Color.YELLOW.withAlpha(.1),outlineColor:Cesium.Color.YELLOW,outlineWidth:2},function(e){e.pottingPoint,t._viewer.entities.remove(e),t.addParticleSystem(e.centerPoint,e.LANG,e.WIDTH,t.height)})}addParticleSystem(t,e,i,m){let n=this;var C=n._viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(t.lng,t.lat,m/2),box:{dimensions:new Cesium.Cartesian3(e,i,m),fill:!1,outline:!1}});const l=n.rainParticleSize,c=new Cesium.Cartesian2(l,l),u=new Cesium.Cartesian2(l*2,l*2);let r=new Cesium.Cartesian3;const s=function(o,v){r=Cesium.Cartesian3.normalize(o.position,r),Cesium.Cartesian3.multiplyByScalar(r,Cesium.Math.randomBetween(-30,-300),r),o.velocity=Cesium.Cartesian3.add(o.velocity,r,o.velocity),Cesium.Cartesian3.distance(n._viewer.scene.camera.position,o.position)};let d=n._viewer.scene.primitives.add(new Cesium.ParticleSystem({modelMatrix:n.computeModelMatrix(C,Cesium.JulianDate.now()),minimumSpeed:-1,maximumSpeed:0,lifetime:15,emitter:new Cesium.BoxEmitter(new Cesium.Cartesian3(e,i,m)),emitterModelMatrix:n.computeEmitterModelMatrix(),startScale:.5,endScale:1,image:n.image,emissionRate:n.emissionRate||4e3,startColor:new Cesium.Color(.27,.5,.7,0),endColor:new Cesium.Color(.27,.5,.7,.98),minimumImageSize:c,maximumImageSize:u,updateCallback:s}));n._viewer.entities.remove(C),n.ParticleSystem=d}clearAll(){this.ParticleSystem&&this._viewer.scene.primitives.remove(this.ParticleSystem),this.ParticleSystem=""}computeModelMatrix(t,e){var i=Cesium.Property.getValueOrUndefined(t.position);return Cesium.Transforms.eastNorthUpToFixedFrame(i)}computeEmitterModelMatrix(){let t=Cesium.HeadingPitchRoll.fromDegrees(0,0,0),e=new Cesium.TranslationRotationScale;return e.translation=Cesium.Cartesian3.fromElements(2.5,4,1),e.rotation=Cesium.Quaternion.fromHeadingPitchRoll(t),Cesium.Matrix4.fromTranslationRotationScale(e,new Cesium.Matrix4)}}class j{constructor(t,e){t&&(this._viewer=t,this.boxEntity=null,this.snowParticleSize=e.snowParticleSize||12,this.emissionRate=e.emissionRate||4e3,this.height=e.height||4e4,this.ParticleSystem=null,this.image="data:image/png;base64,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")}CreateRangeAnalysis(){let t=this;M(t._viewer,[],{color:Cesium.Color.YELLOW.withAlpha(.1),outlineColor:Cesium.Color.YELLOW,outlineWidth:2},function(e){e.pottingPoint,t._viewer.entities.remove(e),t.addParticleSystem(e.centerPoint,e.LANG,e.WIDTH,t.height)})}addParticleSystem(t,e,i,m){let n=this;var C=n._viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(t.lng,t.lat,m/2),box:{dimensions:new Cesium.Cartesian3(e,i,m),fill:!1,outline:!1}});const l=n.snowParticleSize,c=new Cesium.Cartesian2(l,l),u=new Cesium.Cartesian2(l*2,l*2);let r=new Cesium.Cartesian3;const s=function(o,v){r=Cesium.Cartesian3.normalize(o.position,r),Cesium.Cartesian3.multiplyByScalar(r,Cesium.Math.randomBetween(-30,-300),r),o.velocity=Cesium.Cartesian3.add(o.velocity,r,o.velocity),Cesium.Cartesian3.distance(n._viewer.scene.camera.position,o.position)};let d=n._viewer.scene.primitives.add(new Cesium.ParticleSystem({modelMatrix:n.computeModelMatrix(C,Cesium.JulianDate.now()),minimumSpeed:-1,maximumSpeed:0,lifetime:15,emitter:new Cesium.BoxEmitter(new Cesium.Cartesian3(e,i,m)),emitterModelMatrix:n.computeEmitterModelMatrix(),startScale:.5,minimumParticleLife:.5,maximumParticleLife:2,endScale:1,image:n.image,emissionRate:n.emissionRate||4e3,startColor:Cesium.Color.WHITE.withAlpha(0),endColor:Cesium.Color.WHITE.withAlpha(1),minimumImageSize:c,maximumImageSize:u,updateCallback:s}));n._viewer.entities.remove(C),n.ParticleSystem=d}clearAll(){this.ParticleSystem&&this._viewer.scene.primitives.remove(this.ParticleSystem),this.ParticleSystem=""}computeModelMatrix(t,e){var i=Cesium.Property.getValueOrUndefined(t.position);return Cesium.Transforms.eastNorthUpToFixedFrame(i)}computeEmitterModelMatrix(){let t=Cesium.HeadingPitchRoll.fromDegrees(0,0,0),e=new Cesium.TranslationRotationScale;return e.translation=Cesium.Cartesian3.fromElements(2.5,4,1),e.rotation=Cesium.Quaternion.fromHeadingPitchRoll(t),Cesium.Matrix4.fromTranslationRotationScale(e,new Cesium.Matrix4)}}const Z={class:"toolButton"},K={__name:"index",setup(a){let t,e;const i=()=>{new B().rainEffect()},m=()=>{t=new X(viewer,{rainParticleSize:12,emissionRate:5e3,height:1e4}),t.CreateRangeAnalysis()},n=()=>{new B().snowEffect()},C=()=>{e=new j(viewer,{snowParticleSize:12,emissionRate:5e3,height:1e4}),e.CreateRangeAnalysis()},l=()=>{viewer.scene.postProcessStages.add(new Cesium.PostProcessStage({fragmentShader:W,uniforms:{mix_factor:.2,fall_interval:.7}}))},c=()=>{new B().setFogEffect()},u=()=>{viewer.scene.postProcessStages.removeAll()};return(r,s)=>{const d=H("el-button");return J(),L(V,null,[h(k),Y("div",Z,[h(d,{type:"primary",onClick:s[0]||(s[0]=o=>i())},{default:p(()=>[A("雨(全部)")]),_:1}),h(d,{type:"primary",onClick:s[1]||(s[1]=o=>m())},{default:p(()=>[A("雨(局部)")]),_:1}),h(d,{type:"primary",onClick:s[2]||(s[2]=o=>n())},{default:p(()=>[A("雪")]),_:1}),h(d,{type:"primary",onClick:s[3]||(s[3]=o=>C())},{default:p(()=>[A("雪(局部)")]),_:1}),h(d,{type:"primary",onClick:s[4]||(s[4]=o=>r.fog())},{default:p(()=>[A("雾")]),_:1}),h(d,{type:"primary",onClick:s[5]||(s[5]=o=>l())},{default:p(()=>[A("闪电")]),_:1}),h(d,{type:"primary",onClick:s[6]||(s[6]=o=>c())},{default:p(()=>[A("黑夜")]),_:1}),h(d,{type:"primary",onClick:s[7]||(s[7]=o=>u())},{default:p(()=>[A("清除")]),_:1})])],64)}}},ee=O(K,[["__scopeId","data-v-5238de35"]]);export{ee as default};
